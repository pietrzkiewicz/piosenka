{% extends "base.html" %}
{% load staticfiles %}

{% block title %}{{ song.title }}{% endblock title %}

{% load thumbnail %}

{% block description %}Opracowanie piosenki {{song.title}}{% endblock description %}

{% block content %}
{% include "songs/top.html" %}

<div class="container main">
  <div class="row">
    <div class="col-md-8">
      <div class="customwell contentwell">
        <h1 class="remove-top-margin">{{ song }}</h1>

        <div class="row">
          <div class="col-md-6">
            {% if song.original_title %}
            <b>Tytuł oryginalny: </b>
            <i>{{ song.original_title }}</i>
            <br />
            {% endif %}

            {% if song.text_authors %}
            <b>Tekst: </b>
            {% for author in song.text_authors %}
            <a href="{{author.get_absolute_url}}">{{ author }}</a>
            {% endfor %}
            <br />
            {% endif %}

            {% if song.composers %}
            <b>Muzyka: </b>
            {% for composer in song.composers %}
            <a href="{{composer.get_absolute_url}}">{{ composer }}</a>
            {% endfor %}
            <br />
            {% endif %}

            {% if song.translators %}
            <b>Tłumaczenie: </b>
            {% for translator in song.translators %}
            <a href="{{translator.get_absolute_url}}">{{ translator }}</a>
            {% endfor %}
            <br />
            {% endif %}

            {% if song.performers %}
            <b>Wykonanie: </b>
            {% for performer in song.performers %}
            <a href="{{performer.get_absolute_url}}">{{ performer }}</a>
            {% endfor %}
            <br />
            {% endif %}

            {% if song.capo %}
            <b>Kapodaster: </b>
            {{ song.capo }}
            <br />
            {% endif %}
          </div>
          <div class="col-md-6">
        <div class="song-gadget hidden-print">
          <div class="gadget-row">
            <button type="button" class="btn btn-sm btn-default trans-up-trigger">
              <span class="glyphicon glyphicon-arrow-up" title="półton w górę"></span>
            </button>
            <button type="button" class="btn btn-sm btn-default trans-home-trigger">
              <span class="glyphicon glyphicon-home" title="zapis oryginalny"></span>
            </button>
            <button type="button" class="btn btn-sm btn-default trans-down-trigger">
              <span class="glyphicon glyphicon-arrow-down" title="półton w dół"></span>
            </button>
            <span data-toggle="tooltip" data-placement="right" title="Transponuj
              akordy w górę lub w dół." class="tip">
              <span class="glyphicon glyphicon-question-sign"></span>
            </span>
          </div>

          <div class="gadget-row">
            <button type="button" class="btn btn-primary btn-sm chords-trigger chords-normal-trigger">
              <span class="glyphicon glyphicon-music" title="{% if song.has_extra_chords %}podstawowe akordy{% else %}tekst i akordy{% endif %}"></span>
            </button>
            <button type="button" class="btn btn-default btn-sm chords-trigger chords-repeated-trigger" {% if not song.has_extra_chords %}disabled{% endif %}>
              <span class="glyphicon glyphicon-repeat" title="wszystkie akordy"></span>
            </button>
            <button type="button" class="btn btn-default btn-sm chords-trigger chords-none-trigger">
              <span class="glyphicon glyphicon-font" title="tylko tekst"></span>
            </button>
            <span data-toggle="tooltip" data-placement="right" title="Wyświetl lub
              ukryj dodatkowe akordy." class="tip">
              <span class="glyphicon glyphicon-question-sign"></span>
            </span>
          </div>
        </div>
          </div>
        </div>

        <br />

        <blockquote class="custom-blockquote">
          {{ lyrics|safe }}
        </blockquote>

        {% include "base/content_foot.html" with action="Dodane" item=song %}
      </div>
    </div>

    <div class="col-md-4 hidden-print">
      <div class="customwell auxwell">
        <h1>Wersja do druku
        <span data-toggle="tooltip" data-placement="bottom" title="Opracowanie
          zostanie wydrukowane w wybranej tonacji, bez nagłówka i bocznego
          menu. Twoja przeglądarka pozwoli dostosować parametry przed
          rozpoczęciem drukowania." class="tip tip pull-right">
          <span class="glyphicon glyphicon-question-sign"></span>
        </span>
        </h1>
        <p>
        <a href="javascript:window.print()" title="drukuj opracowanie">Drukuj</a>
        </p>
      </div>

      {% if song.score1 or song.score2 or song.score3 %}
      <div class="customwell auxwell">
        <h1>Nuty</h1>
        {% if song.score1 %}
        <center><a href="{{song.score1.url}}"><img src='{{ song.score1|thumbnail_url:'scorethumb' }}'/></a></center><br />
        {% endif %}	
        {% if song.score2 %}
        <center><a href="{{song.score2.url}}"><img src='{{ song.score2|thumbnail_url:'scorethumb' }}'/></a></center><br />
        {% endif %}	
        {% if song.score3 %}
        <center><a href="{{song.score3.url}}"><img src='{{ song.score3|thumbnail_url:'scorethumb' }}'/></a></center><br />
        {% endif %}	
      </div>
      {% endif %}

      {% if song.external_links %}
      <div class="customwell auxwell">
        <h1>Linki</h1>
        <ul class="list-unstyled">
          {% for link in song.external_links %}
          <li><a href="{{link.1}}" target="_blank">{{link.0}}</a></li>
          {% endfor %}
        </ul> 
      </div>  
      {% endif %}

      {% include "base/wells/like.html" with like_what="piosenkę" %}

      {% if can_edit %}
      <div class="customwell auxwell">
        <h1>Administracja</h1>
        <ul class="list-unstyled">
          <li><a href="{{ song.get_edit_url }}">Edytuj opracowanie</a></li>
        </ul>
      </div>
      {% endif %}
    </div>
  </div>
  {% include "base/rows/disqus.html" with disqus_id=song.slug %}
</div>
{% endblock content %}

{% block extra-scripts %}
<script>
var transpositionUrls = []
{% for t in "a"|rjust:"12" %}
transpositionUrls.push("{{ song.get_absolute_url }}transpose/{{ forloop.counter0 }}/");
{% endfor %}
</script>

<script>
$('.tip').tooltip({});
</script>

<script src="{% static "scripts/trigger.js" %}?stamp=12"></script>
{% endblock extra-scripts %}
